!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define("VueDraggable",[],e):"object"==typeof exports?exports.VueDraggable=e():t.VueDraggable=e()}(this,function(){return function(t){var e={};function i(r){if(e[r])return e[r].exports;var n=e[r]={i:r,l:!1,exports:{}};return t[r].call(n.exports,n,n.exports,i),n.l=!0,n.exports}return i.m=t,i.c=e,i.d=function(t,e,r){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(i.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)i.d(r,n,function(e){return t[e]}.bind(null,n));return r},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s=0)}([function(t,e,i){"use strict";i.r(e);var r=function(){for(var t=document.querySelectorAll(".item-dropzone-area"),e=0;e<t.length;e++)t[e].remove()},n=function(t,e,i){for(var r=i.length,n=0;n<r;n++)i[n]!==e.owner&&"none"===i[n].getAttribute("aria-dropeffect")&&(i[n].setAttribute("aria-dropeffect","move"),i[n].setAttribute("tabindex","0"));for(var s=t.length,o=0;o<s;o++)t[o].parentNode!==e.owner&&t[o].getAttribute("aria-grabbed")&&(t[o].removeAttribute("aria-grabbed"),t[o].removeAttribute("tabindex"))},s=function(t,e,i){if(e.items.length){for(var r=0;r<i.length;r++)"none"!==i[r].getAttribute("aria-dropeffect")&&(i[r].setAttribute("aria-dropeffect","none"),i[r].removeAttribute("tabindex"));for(var n=0;n<t.length;n++)t[n].getAttribute("aria-grabbed")?"true"===t[n].getAttribute("aria-grabbed")&&t[n].setAttribute("tabindex","0"):(t[n].setAttribute("aria-grabbed","false"),t[n].setAttribute("tabindex","0"))}},o=function(t){return t.ctrlKey||t.metaKey||t.shiftKey};function a(t){return function(t){if(Array.isArray(t)){for(var e=0,i=new Array(t.length);e<t.length;e++)i[e]=t[e];return i}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var l=function(t){this.selections.owner||(this.selections.owner=t.parentNode),(this.defaultOptions.multipleDropzonesItemsDraggingEnabled||this.selections.owner===t.parentNode)&&(t.setAttribute("aria-grabbed","true"),this.selections.items=this.selections.items.indexOf(t)>=0?this.selections.items:[].concat(a(this.selections.items),[t]))},u=function(t){t.setAttribute("aria-grabbed","false");for(var e=0;e<this.selections.items.length;e++)if(this.selections.items[e]===t){this.selections.items.splice(e,1);break}},c=function(){if(this.selections.items.length){this.selections.owner=null;for(var t=0;t<this.selections.items.length;t++)this.selections.items[t].setAttribute("aria-grabbed","false");this.selections.items=[]}},f=function(){throw new Error("Requested D&D stop...")};function d(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var h=function(t,e,i){var r=function(t,e){return new CustomEvent(t,{detail:e})}(t,e);i.dispatchEvent(r)},g=function(t){var e=this.selections.droptarget.querySelectorAll(this.defaultOptions.draggableSelector),i=this.nextItemElement?Array.prototype.indexOf.call(e,this.nextItemElement):e.length,r=function(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{},r=Object.keys(i);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(i).filter(function(t){return Object.getOwnPropertyDescriptor(i,t).enumerable}))),r.forEach(function(e){d(t,e,i[e])})}return t}({ids:this.selections.items.map(function(t){return t.dataset.id}),index:i,nativeEvent:t},this.selections);this.selections.droptarget!==this.selections.owner?(h("added",r,this.selections.droptarget),h("removed",r,this.selections.owner)):h("reordered",r,this.selections.droptarget)},p={previousTarget:null,dragoverCalls:0},b=function(t){this.selections.items.length&&t.preventDefault(),this.defaultOptions.showDropzoneAreas&&function(t){if(p.dragoverCalls%100==0||t.target!==p.previousTarget&&t.target&&"item-dropzone-area"!==t.target.className){p.dragoverCalls++,p.previousTarget=t.target,this.nextItemElement=t.target.closest(this.defaultOptions.draggableSelector),this.selections.droptarget=t.target.closest(this.defaultOptions.dropzoneSelector);var e=document.createElement("div");e.className="item-dropzone-area",r(),this.selections.droptarget&&this.nextItemElement&&this.selections.droptarget.insertBefore(e,p.previousTarget.closest(this.defaultOptions.draggableSelector)),this.selections.droptarget&&!this.nextItemElement&&this.selections.droptarget.appendChild(e)}}.bind(this)(t)};function m(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var v=function(t){var e=t.target.closest(this.defaultOptions.draggableSelector);if(this.defaultOptions.multipleDropzonesItemsDraggingEnabled||!e||this.selections.owner===e.parentNode){if("function"==typeof this.defaultOptions.onDragstart)try{this.defaultOptions.onDragstart(function(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{},r=Object.keys(i);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(i).filter(function(t){return Object.getOwnPropertyDescriptor(i,t).enumerable}))),r.forEach(function(e){m(t,e,i[e])})}return t}({nativeEvent:t,stop:f},this.selections))}catch(e){return t.preventDefault(),void r()}o(t)&&"false"===e.getAttribute("aria-grabbed")&&l.bind(this)(e),t.dataTransfer.setData("text",""),n(this.items,this.selections,this.targets)}else t.preventDefault()};function y(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{},r=Object.keys(i);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(i).filter(function(t){return Object.getOwnPropertyDescriptor(i,t).enumerable}))),r.forEach(function(e){O(t,e,i[e])})}return t}function O(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var w=function(t){t.addEventListener("mousedown",function(t){if(this.defaultOptions.handlerSelector&&!t.target.closest(this.defaultOptions.handlerSelector))return;var e=t.target.closest(this.defaultOptions.draggableSelector);e&&e.getAttribute("draggable")?(s(this.items,this.selections,this.targets),o(t)||"false"!==e.getAttribute("aria-grabbed")||(c.bind(this)(),l.bind(this)(e))):o(t)?s(this.items,this.selections,this.targets):(s(this.items,this.selections,this.targets),c.bind(this)())}.bind(this),!1),t.addEventListener("mouseup",function(t){var e=this,i=t.target.closest(this.defaultOptions.draggableSelector);if(i&&i.getAttribute("draggable")&&o(t))if(this.selections.items.length&&t.shiftKey){var r=this.selections.items.slice(-1).pop();this.items.forEach(function(t){(function(t,e,i){return t.parentNode===e.parentNode&&(e.offsetTop>i.offsetTop&&t.offsetTop<=e.offsetTop&&t.offsetTop>=i.offsetTop||t.offsetTop>=e.offsetTop&&t.offsetTop<=i.offsetTop)})(t,i,r)&&l.bind(e)(t)})}else"true"===i.getAttribute("aria-grabbed")?(u.bind(this)(i),this.selections.items.length||(this.selections.owner=null)):l.bind(this)(i)}.bind(this),!1),t.addEventListener("dragstart",v.bind(this),!1),t.addEventListener("keydown",function(t){if(t.target.getAttribute("aria-grabbed")&&(32===t.keyCode&&(o(t)?"true"===t.target.getAttribute("aria-grabbed")?(1===this.selections.items.length&&s(this.items,this.selections,this.targets),u.bind(this)(t.target),this.selections.items.length&&n(this.items,this.selections,this.targets),this.selections.items.length||(this.selections.owner=null)):(l.bind(this)(t.target),n(this.items,this.selections,this.targets)):"false"===t.target.getAttribute("aria-grabbed")?(s(this.items,this.selections,this.targets),c.bind(this)(),l.bind(this)(t.target),n(this.items,this.selections,this.targets)):n(this.items,this.selections,this.targets),t.preventDefault()),77===t.keyCode&&o(t))){if(this.selections.items.length)if(n(this.items,this.selections,this.targets),this.selections.owner===this.targets[this.targets.length-1])this.targets[0].focus();else for(var e=0;e<this.targets.length;e++)if(this.selections.owner===this.targets[e]){this.targets[e+1].focus();break}t.preventDefault()}if(27===t.keyCode&&this.selections.items.length&&(s(this.items,this.selections,this.targets),this.selections.items[this.selections.items.length-1].focus(),c.bind(this)()),t.target.getAttribute("aria-dropeffect")&&(13===t.keyCode||77===t.keyCode&&o(t))){if(this.defaultOptions.reactivityEnabled)this.selections.droptarget=t.target,g.bind(this)(t);else for(var i=0;i<this.selections.items.length;i++)t.target.appendChild(this.selections.items[i]);s(this.items,this.selections,this.targets),this.selections.items[this.selections.items.length-1].focus(),c.bind(this)(),t.preventDefault()}}.bind(this),!1),t.addEventListener("dragenter",function(t){this.related=t.target}.bind(this),!1),t.addEventListener("dragleave",function(){var t=function(t){var e=t;do{if(e&&1===e.nodeType&&e.getAttribute("aria-dropeffect"))return e}while(e=e?e.parentNode:null);return null}(this.related);t!==this.selections.droptarget&&(this.selections.droptarget&&(this.selections.droptarget.className=this.selections.droptarget.className.replace(/ dragover/g,"")),t&&(t.className+=" dragover"),this.selections.droptarget=t)}.bind(this),!1),t.addEventListener("dragover",b.bind(this),!1),t.addEventListener("dragend",function(t){if("function"==typeof this.defaultOptions.onDragend)try{this.defaultOptions.onDragend(y({nativeEvent:t,stop:f},this.selections))}catch(t){return void r()}this.selections.droptarget&&(this.defaultOptions.reactivityEnabled?g.bind(this)(t):function(t,e,i){for(var r=0;r<e.length;r++)i?t.insertBefore(e[r],i):t.appendChild(e[r])}(this.selections.droptarget,this.selections.items,this.nextItemElement),"function"==typeof this.defaultOptions.onDrop&&this.defaultOptions.onDrop(y({nativeEvent:t,stop:function(){throw new Error("Stop method is available only for callbacks\n                    'onDragstart' and 'onDragend'. For more info look at\n                    https://github.com/Vivify-Ideas/vue-draggable/blob/master/README.md\n                  ")}},this.selections)),t.preventDefault()),this.selections.items.length&&(s(this.items,this.selections,this.targets),this.selections.droptarget&&(c.bind(this)(),this.selections.droptarget.className=this.selections.droptarget.className.replace(/ dragover/g,""),this.selections.droptarget=null)),r()}.bind(this),!1)};function A(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var E=function(t,e){return function(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{},r=Object.keys(i);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(i).filter(function(t){return Object.getOwnPropertyDescriptor(i,t).enumerable}))),r.forEach(function(e){A(t,e,i[e])})}return t}({dropzoneSelector:"ul",draggableSelector:"li",handlerSelector:null,reactivityEnabled:!0,multipleDropzonesItemsDraggingEnabled:!1,showDropzoneAreas:!0},e,{onDragstart:(e.onDragstart||function(){}).bind(t),onDragend:(e.onDragend||function(){}).bind(t),onDrop:(e.onDrop||function(){}).bind(t)})},D=function(){return{targets:null,items:null,nextItemElement:null,related:null,selections:{items:[],owner:null,droptarget:null}}};function j(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var S=function(){function t(e,i,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),Object.assign(this,D(),{defaultOptions:E(i,r)},{el:e}),this.registerListeners(e),this.initiate(e)}var e,i,r;return e=t,(i=[{key:"registerListeners",value:function(t){w.bind(this)(t)}},{key:"initiate",value:function(t){(function(t){this.targets=function(t,e){return t.querySelectorAll(e)}(t,this.defaultOptions.dropzoneSelector),this.items=function(t,e){return t.querySelectorAll(e)}(t,this.defaultOptions.draggableSelector);for(var e=0;e<this.targets.length;e++)this.targets[e].setAttribute("aria-dropeffect","none");for(var i=0;i<this.items.length;i++)this.items[i].setAttribute("draggable","true"),this.items[i].setAttribute("aria-grabbed","false"),this.items[i].setAttribute("tabindex","0")}).bind(this)(t)}}])&&j(e.prototype,i),r&&j(e,r),t}();function x(t){return function(t){if(Array.isArray(t)){for(var e=0,i=new Array(t.length);e<t.length;e++)i[e]=t[e];return i}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var P=["added","removed","reordered"],T={name:"VueDraggableGroup",props:{groups:{required:!0,type:Array},value:{required:!0,type:Array},itemsKey:{type:String,default:"items"}},render:function(){return this.$scopedSlots.default({})},methods:{added:function(t){var e,i=this,r=this.groups.map(function(t){return t[i.itemsKey]}).reduce(function(t,e){return[].concat(x(t),x(e))},[]).filter(function(e){return t.detail.ids.map(Number).indexOf(e.id)>=0});(e=this.value).splice.apply(e,[t.detail.index,0].concat(x(r))),this.$emit("change",this.groups)},removed:function(t){var e=this.value.filter(function(e){return t.detail.ids.map(Number).indexOf(e.id)<0});this.$emit("input",e)},reordered:function(t,e){var i=this.value.filter(function(e){return t.detail.ids.map(Number).indexOf(e.id)>=0}),r=this.value.filter(function(e){return t.detail.ids.map(Number).indexOf(e.id)<0});r.splice.apply(r,[t.detail.index,0].concat(x(i))),this.$emit("input",r),this.$emit("change",this.groups)},addListeners:function(){var t=this;P.forEach(function(e){return t.$el.addEventListener(e,t[e])})},removeListeners:function(){var t=this;P.forEach(function(e){return t.$el.removeEventListener(e,t[e])})}},mounted:function(){this.addListeners()},beforeDestroy:function(){this.removeListeners()}};i.d(e,"VueDraggableDirective",function(){return k});var N=[],k={bind:function(t,e,i){var r=new S(t,i.context,e.value);N.push(r)},componentUpdated:function(t){setTimeout(function(){N.forEach(function(e){e.el===t&&e.initiate(t)})})},unbind:function(t){N=N.filter(function(e){return e.el!==t})}};S.install=function(t){t.directive("drag-and-drop",k),t.component("vue-draggable-group",T)};e.default=S}])});
//# sourceMappingURL=vue-draggable.min.js.map